(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{1584:function(e,t,a){"use strict";a.r(t);var n=a(164),i=a.n(n),r=a(165),c=a.n(r),s=a(125),o=a.n(s),l=a(166),u=a.n(l),d=a(167),p=a.n(d),f=a(124),m=a.n(f),g=a(16),h=a.n(g),v=a(4),D=a.n(v),k=a(126),T=a(947),b=a(1),S=a(951),y=a(953),E=a(950);function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=m()(e);if(t){var i=m()(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return p()(this,a)}}var F=function(e){u()(a,e);var t=I(a);function a(e){return i()(this,a),t.call(this,e)}return c()(a,[{key:"render",value:function(){var e=this.props,t=e.closePopup,a=e.confirmDelete,n=e.tik,i=e.deleteData,r=n.successLoader;return D.a.createElement(T.k,{closePopup:t},D.a.createElement("div",{class:"modal-body pt-0 plr-100 pb-5"},D.a.createElement("img",{class:"mx-auto d-block text-center mb-5",src:E.a.error}),D.a.createElement("h4",{class:"modal-title text-center f-20 mb-5 f-m",id:""}," Delete  Draft",i.tikName,"?"),D.a.createElement("div",{class:"d-flex"},D.a.createElement(T.c,{type:"button",buttonText:"No",className:"m-1 clear_button",onClick:t}),D.a.createElement(T.c,{type:"button",className:"m-1",buttonText:r?D.a.createElement("i",{class:"fa fa-refresh fa-spin"}):"Yes",onClick:a}))))}}]),a}(v.Component),w=a(265),P=a.n(w),N=a(965),x=a(11);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=m()(e);if(t){var i=m()(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return p()(this,a)}}var L=function(e){u()(a,e);var t=O(a);function a(e){var n;return i()(this,a),n=t.call(this,e),h()(o()(n),"onChangeTag",(function(e){n.setState({tags:e})})),h()(o()(n),"addTagForm",(function(){var e=n.state.tags,t=n.props,a=t.addTagData,i=t.emailID,r=t.existingTags;if(e.length>0){var c={documentId:a.blockchainDocId,email:i,tags:P()(e)},s={};s.body=c,s.existingTags=r,n.props.addTagsInTik(s)}else x.c.error("Tags is required!")})),h()(o()(n),"removeTag",(function(e){var t=n.props,a=t.addTagData,i=t.emailID,r={documentId:a.blockchainDocId,email:i,tags:[e]};n.props.deleteTagsInTik(r)})),n.state={tags:[]},n}return c()(a,[{key:"componentDidMount",value:function(){var e={documentId:this.props.addTagData.blockchainDocId};this.props.addExistingTagsInTik(e)}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.deleteFlagSuccess,n=t.addTagData;if(a!==e.deleteFlagSuccess){var i={documentId:n.blockchainDocId};this.props.addExistingTagsInTik(i)}}},{key:"render",value:function(){var e=this,t=this.props,a=t.closePopup,n=t.successLoader,i=t.existingTagsLoader,r=t.existingTags,c=this.state.tags,s=N.a.addTag,o=s.title,l=s.addTag,u=s.existingTags,d=s.button;return D.a.createElement(D.a.Fragment,null,D.a.createElement(T.k,{closePopup:a},D.a.createElement("div",{className:"modal-body pt-0 plr-100 pb-5"},D.a.createElement("h4",{className:"modal-title text-center f-24 mb-4 f-b",id:"forgotTitle"},o),D.a.createElement("form",null,D.a.createElement("div",{className:"form-group row"},D.a.createElement("label",{htmlFor:"staticEmail",className:"col-sm-4 col-form-label f-m f-18"},l),D.a.createElement("div",{className:"col-sm-8"},D.a.createElement(T.a,{onChangeTag:this.onChangeTag,tags:c,addTagLabel:l}))),i&&D.a.createElement("div",{className:"loader-add-tag"},D.a.createElement("i",{className:"fa fa-refresh fa-spin"}))||D.a.createElement("div",{className:"form-group row"},r&&r.length>0&&D.a.createElement("label",{htmlFor:"inputPassword",className:"col-sm-4 col-form-label f-m f-18"},u),D.a.createElement("div",{className:"col-sm-8 existingTagWrapper"},r&&r.length>0&&r.map((function(t){return D.a.createElement("div",{className:"tag-input"}," ",D.a.createElement("span",{className:"existingTag"},t," ",D.a.createElement("span",null,D.a.createElement("a",{className:"ml-1 remove-tag",onClick:function(){return e.removeTag(t)}},D.a.createElement("i",{className:"fas fa-times-circle"}))))," ")}))))),D.a.createElement(T.c,{type:"button",buttonText:n?D.a.createElement("i",{className:"fa fa-refresh fa-spin"}):d,className:"btn btn-primary w-100 my-1 f-18 f-b",onClick:function(){return e.addTagForm()}}))))}}]),a}(v.Component),C=Object(k.b)((function(e){return{successLoader:e.Tik.successLoader,successPopup:e.Tik.successPopup,emailID:e.Profile.email,existingTags:e.Tik.existingTags,existingTagsLoader:e.Tik.existingTagsLoader,deleteFlagSuccess:e.Tik.deleteFlagSuccess}}),(function(e){return{addTagsInTik:function(t){return e(b.m(t))},addExistingTagsInTik:function(t,a){return e(b.d(t,a))},deleteTagsInTik:function(t){return e(b.bb(t))}}}))(L),M=a(402);function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){h()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=m()(e);if(t){var i=m()(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return p()(this,a)}}var A={titles:y.e,data:[]},Y=function(e){u()(a,e);var t=j(a);function a(e){var n;return i()(this,a),n=t.call(this,e),h()(o()(n),"handleFilter",(function(e){n.setState({selectedFilter:e}),n.props.getDocumentListInfo(e)})),h()(o()(n),"getIndexofMetaFiled",(function(){var e=n.props.metaList,t=[];return A.titles.map((function(a){e.filter((function(e){a.id==e.name&&a.isDropdownShow&&t.push(a)}))})),t})),h()(o()(n),"getIndexofMetaFiledAdd",(function(){var e=[];return A.titles.map((function(t){t.isDropdownShow||e.push(t)})),e})),h()(o()(n),"successPopup",(function(){n.setState({deleteSuccessFlag:!1,deleteDraftFlag:!1,deleteDraftData:{},SuccessPopupFlag:!0,addFlag:!1})})),h()(o()(n),"successPopupClosePopup",(function(){n.props.tikInitialization(),n.setState({deleteDraftFlag:!1,deleteDraftData:{},SuccessPopupFlag:!1,deleteSuccessFlag:!1})})),h()(o()(n),"deleteClosePopup",(function(){document.body.classList.remove("modal-open"),n.setState({deleteDraftFlag:!1,deleteDraftData:{}})})),h()(o()(n),"deleteDraftOnClick",(function(e){document.body.classList.add("modal-open"),n.setState({deleteDraftFlag:!0,deleteDraftData:e,deleteSuccessFlag:!0})})),h()(o()(n),"confirmDelete",(function(){var e={draftId:n.state.deleteDraftData._id};n.props.deleteDraftTikListing(e)})),h()(o()(n),"editDraft",(function(e){n.props.draftDtail({Id:e._id}),localStorage.setItem("draftId",JSON.stringify(e._id))})),h()(o()(n),"editTik",(function(e){n.props.tikDetail({Id:e._id}),localStorage.setItem("docId",JSON.stringify(e._id))})),h()(o()(n),"viewDraft",(function(e,t){"Drafts"==t&&(n.setState({viewDraft:!0}),n.props.draftDtail({Id:e._id}),localStorage.setItem("draftId",JSON.stringify(e._id))),"all"==t&&(n.props.viewTik({Id:e._id}),localStorage.setItem("docId",JSON.stringify(e._id)))})),h()(o()(n),"addMetaFiled",(function(e,t){if("plus"===t){var a;a=n.getIndexofMetaFiledAdd();var i=A.titles.findIndex((function(e){return e.id===a[0].id}));A.titles[i]&&(A.titles[i].isDropdownShow=!A.titles[i].isDropdownShow)}else{var r=A.titles.findIndex((function(t){return t.id===e.id}));A.titles[r]&&(A.titles[r].isDropdownShow=!A.titles[r].isDropdownShow)}n.setState({flag:!0})})),h()(o()(n),"addButtonOnClick",(function(e){n.setState({addFlag:!0,addTagData:e})})),h()(o()(n),"addTagClosePopup",(function(){n.setState({addFlag:!1})})),h()(o()(n),"archiveDocument",(function(e){n.props.archive({Id:e._id,isArchive:!0})})),h()(o()(n),"unarchiveDocument",(function(e){n.props.archive({Id:e._id,isArchive:!1})})),n.state={filter:["all","Accepted","Update_Required","Rejected","Pending","Shared with me","Drafts","archive-list"],selectedFilter:"all",metaFlag:!1,deleteDraftFlag:!1,deleteDraftData:{},getFinalMetaValue:[],deleteSuccessFlag:!1,addFlag:!1,viewDraft:!1},n.myRef=D.a.createRef(),n}return c()(a,[{key:"componentDidMount",value:function(){this.props.history.replace();var e=this.state.selectedFilter;this.props.getDocumentListInfo(e),this.props.getMetaListInfo(),localStorage.removeItem("addMetaData"),localStorage.removeItem("isEditTik"),localStorage.removeItem("prevroute"),localStorage.removeItem("selectId"),this.props.createTikEdit({metaData:[]}),this.props.clearDraft();var t=null!=this.props.location.state?this.props.location.state.detail:"all";this.handleFilter(t)}},{key:"componentDidUpdate",value:function(e){var t=this.props.tik,a=t.successPopup,n=t.successLoader,i=t.deleteFlag,r=this.state,c=r.selectedFilter,s=r.deleteSuccessFlag,o=r.viewDraft;this.props!==e&&""!==a&&!1===n&&(this.successPopup(),!0===i&&!0===s&&this.props.getDocumentListInfo(c)),e.draftDetailData!=this.props.draftDetailData&&(o?this.props.history.push("/view-draft"):this.props.history.push("/edit-draft")),e.tikDetailSuccess!=this.props.tikDetailSuccess&&this.props.history.push("/edit-tik"),e.viewTikData!=this.props.viewTikData&&this.props.history.push("/view-tik"),this.props.archiveSuccess!=e.archiveSuccess&&(this.successPopup(),this.props.getDocumentListInfo(c))}},{key:"render",value:function(){var e=this,t=this.state,a=t.filter,n=t.selectedFilter,i=t.metaFlag,r=t.deleteDraftData,c=t.deleteDraftFlag,s=t.SuccessPopupFlag,o=t.getFinalMetaValue,l=t.addFlag,u=t.addTagData,d=t.archiveSuccess,p=this.props,f=p.documentList,m=p.metaList,g=p.loader,h=p.tik,v=p.document,k=p.roledocument,b=h.successPopup;console.log(k),A={titles:y.e,data:[]},f&&f.length>0&&(A.data=f.map((function(e,t){var a=e.createdAt;return _(_({},e),{date:Object(S.c)(a),time:Object(S.d)(a)})}))),d&&d.length>0&&(A.data=d.data.map((function(e,t){var a=e.createdAt;return _(_({},e),{date:Object(S.c)(a),time:Object(S.d)(a)})}))),m.length>0&&0===A.titles.filter((function(e){return e.id===m[0].name})).length&&!1===i&&m.length>0&&m.map((function(e,t){0===t&&0===A.titles.filter((function(e){return e.id===m[0].name})).length?A.titles.splice(1,0,{id:e.name,isSort:!0,text:e.name,isDropdownShow:!0}):A.titles.splice(t+1,0,{id:e.name,isSort:!0,text:e.name,isDropdownShow:!1})}));var E=this.getIndexofMetaFiled();return D.a.createElement(D.a.Fragment,null,D.a.createElement(M.Helmet,null,D.a.createElement("script",null)),D.a.createElement(T.w,null,D.a.createElement("div",{id:"dochistory",className:"wrapper wrapper-content"},D.a.createElement("div",{className:"row"},D.a.createElement("div",{className:"col-xl-12"},D.a.createElement("div",{id:"changingContent",className:"containerBox"},D.a.createElement("div",{className:!0},D.a.createElement("div",{className:"table-title"},D.a.createElement("h2",{className:"f-b mb-4 mt-0"},"Tik History")),D.a.createElement("ul",{className:"nav nav-pills"},a.map((function(t,a){return D.a.createElement("li",{className:"nav-item",key:a},D.a.createElement("a",{className:"nav-link ".concat(n===t?"active":""),onClick:function(){return e.handleFilter(t)}},y.c[t]))}))),D.a.createElement("div",{className:"tab-content mt-2"},D.a.createElement("div",{className:"tab-pane active",id:"all"},D.a.createElement("div",{className:"table-responsive fixHeight",style:{maxHeight:"calc(100vh - 360px)"}},D.a.createElement(T.u,{dataTable:A,deleteDraftOnClick:this.deleteDraftOnClick,defaultSort:"documentStatus",loader:g,metaList:m,addButtonOnClick:this.addButtonOnClick,selectedFilter:n,getFinalMetaValue:o,editButtonOnClick:this.editDraft,updateButtonOnClick:this.editTik,addMetaFiled:this.addMetaFiled,metaFieldData:E,viewDraft:this.viewDraft,action:!0,editPermission:null==v||null==k||v.update||k.update,archive:this.archiveDocument,unarchive:this.unarchiveDocument}))),D.a.createElement("div",{className:"tab-pane fade",id:"archive"},"...")),c&&D.a.createElement(F,{closePopup:this.deleteClosePopup,confirmDelete:this.confirmDelete,tik:h,deleteData:r}),s&&b&&D.a.createElement(T.q,{msg:b.msg,closePopup:this.successPopupClosePopup}),l&&D.a.createElement(C,{closePopup:this.addTagClosePopup,addTagData:u}))))))))}}]),a}(v.Component);t.default=Object(k.b)((function(e){return{documentList:e.Tik.documentList,metaList:e.Tik.metaList,loader:e.Tik.loader,tik:e.Tik,draftDetailData:e.Tik.draftDetailSuccess,tikDetailSuccess:e.Tik.tikDetailSuccess,viewTikData:e.Tik.viewTik,roledocument:e.Profile.Roledocument,document:e.Profile.document,archiveSuccess:e.Tik.archiveSuccess}}),(function(e){return{getDocumentListInfo:function(t){return e(b.Hb(t))},getMetaListInfo:function(){return e(b.Lb())},deleteDraftTikListing:function(t){return e(b.W(t))},createTikEdit:function(t){return e(b.Q(t))},draftDtail:function(t){return e(b.sb(t))},tikInitialization:function(){return e(b.id())},clearDraft:function(){return e(b.J())},tikDetail:function(t){return e(b.gd(t))},viewTik:function(t){return e(b.Ad(t))},archive:function(t){return e(b.A(t))}}}))(Y)},951:function(e,t,a){"use strict";a.d(t,"e",(function(){return c})),a.d(t,"c",(function(){return s})),a.d(t,"d",(function(){return o})),a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return d}));var n=a(946),i=a.n(n),r=a(953),c=function(e){return e&&i()(e).format("MM-DD-YYYY")},s=function(e){return e&&i()(e).format("Do MMM YYYY")},o=function(e){return e&&i()(e).format("hh:mm A")},l=function(e,t,a){r.h[t].forEach((function(t){a.push(e[t])}))},u=function(e){var t=new FormData;return t.append("autoSave",e.autoSave),t.append("template_name",e.template_name),t.append("template_type",e.template_type),t.append("isAcceptanceDocument",e.isAcceptanceDocument),t.append("attribute",JSON.stringify(e.attribute)),e.acceptance_form&&t.append("acceptance_form",e.acceptance_form),t.append("thumbnail",e.thumbnail),e.templateId&&t.append("templateId",e.templateId),t},d=function(e,t,a,n,i){var r=[];return l(e,"role",r),l(t,"document",r),l(a,"template",r),l(n,"invoice",r),l(i,"payment",r),r}}}]);